
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Indexes &#8212; Ciruela 0.6.12 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="prev" title="Signatures" href="signatures.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="indexes">
<span id="db-indexes"></span><h1>Indexes<a class="headerlink" href="#indexes" title="Permalink to this headline">¶</a></h1>
<p>Index is basically a list of files and directories and their checksums that
will be reconstructed when image is downloaded. The indexes are stored in
<code class="docutils literal notranslate"><span class="pre">/var/lib/ciruela/indexes</span></code>.</p>
<p>Supported index formats:</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">.ds1</span></code> – <a class="reference external" href="https://github.com/tailhook/dir-signature/blob/master/FORMAT.v1.rst">dir-signature v1</a></li>
</ul>
<p>Indexes are named by it’s own hash (not the hash of the index file itself but
the hash that is stored in the bottom line of the index file). The first
two characters of a hash file are the directory name, so the full path of
the index file is:</p>
<blockquote>
<div>/var/lib/ciruela/indexes/e8/e8082d95318cb704297975988aca7b95770a3d6bb3023687dae68dcfff644d84.ds1</div></blockquote>
<p>Note: we store all indexes here regardless of which user requested the upload
and what directory it should be put into. Retention policy of index files is
very much different to the retention of the files themselves. In the first
implementation we keep all indexes that are used anywhere in the cluster on
every node. We’re considering to tighten the scope in future.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Ciruela</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">User Guide:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../use-cases/index.html">Use Cases</a></li>
<li class="toctree-l1"><a class="reference internal" href="../config/index.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../client/index.html">Command-line Client Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../compatibility.html">Version Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Ciruela Changes by Version</a></li>
</ul>
<p class="caption"><span class="caption-text">Developer Guide:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../protocols/index.html">Network Protocols</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Storage Bookkeeping and Management</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="signatures.html">Signatures</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Indexes</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Storage Bookkeeping and Management</a><ul>
      <li>Previous: <a href="signatures.html" title="previous chapter">Signatures</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Paul Colomiets.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/database/indexes.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>